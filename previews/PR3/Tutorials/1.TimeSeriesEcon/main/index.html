<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Time Series · StateSpaceEcon</title><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.png" alt="StateSpaceEcon logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">StateSpaceEcon</a></span></div><form class="docs-search" action="../../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../../">Welcome</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../../">Introduction</a></li><li><a class="tocitem" href="../../README/">README</a></li><li class="is-active"><a class="tocitem" href>Time Series</a><ul class="internal"><li><a class="tocitem" href="#Frequency-and-Time"><span>Frequency and Time</span></a></li><li><a class="tocitem" href="#Ranges"><span>Ranges</span></a></li><li><a class="tocitem" href="#Time-Series-2"><span>Time Series</span></a></li><li><a class="tocitem" href="#Arithmetic-with-TSeries"><span>Arithmetic with <code>TSeries</code></span></a></li><li><a class="tocitem" href="#Time-Series-Operations"><span>Time Series Operations</span></a></li><li><a class="tocitem" href="#Multi-variate-Time-Series"><span>Multi-variate Time Series</span></a></li><li><a class="tocitem" href="#Plotting"><span>Plotting</span></a></li><li><a class="tocitem" href="#Workspaces"><span><code>Workspace</code>s</span></a></li><li><a class="tocitem" href="#overlay"><span><code>overlay</code></span></a></li><li><a class="tocitem" href="#compare-and-@compare"><span><code>compare</code> and <code>@compare</code></span></a></li></ul></li><li><a class="tocitem" href="../../2.simple_RBC/main/">Simple RBC Model</a></li><li><a class="tocitem" href="../../3.US_SW07/main/">Smets and Wouters 2007</a></li><li><a class="tocitem" href="../../4.FRB-US/main/">FRB/US</a></li></ul></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="../../../Reference/TimeSeriesEcon/">TimeSeriesEcon</a></li><li><a class="tocitem" href="../../../Reference/ModelBaseEcon/">ModelBaseEcon</a></li><li><a class="tocitem" href="../../../Reference/StateSpaceEcon/">StateSpaceEcon</a></li><li><a class="tocitem" href="../../../Reference/FAME/">FAME</a></li></ul></li><li><span class="tocitem">Design Papers</span><ul><li><a class="tocitem" href="../../../DesignPapers/">Design Papers</a></li><li><a class="tocitem" href="../../../DesignPapers/final_conditions/">Final Conditions</a></li><li><a class="tocitem" href="../../../DesignPapers/log_variables/">Log-variables</a></li></ul></li><li><a class="tocitem" href="../../../indexpage/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>Time Series</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Time Series</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/bankofcanada/TutorialsEcon.jl/blob/master/1.TimeSeriesEcon/main.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Time-Series"><a class="docs-heading-anchor" href="#Time-Series">Time Series</a><a id="Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Time-Series" title="Permalink"></a></h1><p>In this tutorial we will see how to use the functionality provided in TimeSeriesEcon to manipulate time series data.</p><p>All code presented here is also available in <a href="../main.jl"><code>main.jl</code></a>.</p><ul><li><a href="#Time-Series">Time Series</a></li><li class="no-marker"><ul><li><a href="#Frequency-and-Time">Frequency and Time</a></li><li class="no-marker"><ul><li><a href="#Frequency">Frequency</a></li><li><a href="#Moments-and-Durations">Moments and Durations</a></li><li><a href="#Arithmetic-with-Time">Arithmetic with Time</a></li><li><a href="#Other-Operations">Other Operations</a></li></ul></li><li><a href="#Ranges">Ranges</a></li><li><a href="#Time-Series-2">Time Series</a></li><li class="no-marker"><ul><li><a href="#Creation-of-TSeries">Creation of <code>TSeries</code></a></li><li><a href="#Access-to-Elements-of-TSeries">Access to Elements of <code>TSeries</code></a></li></ul></li><li><a href="#Arithmetic-with-TSeries">Arithmetic with <code>TSeries</code></a></li><li><a href="#Time-Series-Operations">Time Series Operations</a></li><li class="no-marker"><ul><li><a href="#Shifts">Shifts</a></li><li><a href="#Diff-and-Undiff">Diff and Undiff</a></li><li><a href="#Moving-Average">Moving Average</a></li><li><a href="#Recursive-assignments">Recursive assignments</a></li></ul></li><li><a href="#Multi-variate-Time-Series">Multi-variate Time Series</a></li><li class="no-marker"><ul><li><a href="#Creation-of-MVTSeries">Creation of <code>MVTSeries</code></a></li><li><a href="#Access">Access</a></li></ul></li><li><a href="#Plotting">Plotting</a></li><li><a href="#Workspaces"><code>Workspace</code>s</a></li><li class="no-marker"><ul><li><a href="#MVTSeries-vs-Workspace"><code>MVTSeries</code> vs <code>Workspace</code></a></li></ul></li><li><a href="#overlay"><code>overlay</code></a></li><li><a href="#compare-and-@compare"><code>compare</code> and <code>@compare</code></a></li></ul></li></ul><p>In this tutorial we need the following packages.</p><pre><code class="language-julia hljs">using TimeSeriesEcon
using Statistics
using Plots</code></pre><h2 id="Frequency-and-Time"><a class="docs-heading-anchor" href="#Frequency-and-Time">Frequency and Time</a><a id="Frequency-and-Time-1"></a><a class="docs-heading-anchor-permalink" href="#Frequency-and-Time" title="Permalink"></a></h2><p>In a time series the values are evenly spaced in time and each value is labelled with the moment in which it occurred. TimeSeriesEcon provides data types that represent these concepts.</p><h3 id="Frequency"><a class="docs-heading-anchor" href="#Frequency">Frequency</a><a id="Frequency-1"></a><a class="docs-heading-anchor-permalink" href="#Frequency" title="Permalink"></a></h3><p>The abstract type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Frequency"><code>Frequency</code></a> represents the idea of the frequency of a time series. All concrete frequencies are special cases. Currently we have three calendar frequencies, <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Yearly"><code>Yearly</code></a>, <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Quarterly"><code>Quarterly</code></a>, and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Monthly"><code>Monthly</code></a>, which are all defined by a number of periods per year. We also have the frequency <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Unit"><code>Unit</code></a>, which is not based on the calendar and simply counts observations. Typically there&#39;s no need to work directly with these frequency types.</p><h3 id="Moments-and-Durations"><a class="docs-heading-anchor" href="#Moments-and-Durations">Moments and Durations</a><a id="Moments-and-Durations-1"></a><a class="docs-heading-anchor-permalink" href="#Moments-and-Durations" title="Permalink"></a></h3><p>In TimeSeriesEcon there are two data types to represent the notion of time. Data of type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> are labels for particular <em>moments in time</em>, while the data type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a> represents the amount of time between two <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>s. Both are generic types, in the sense that they are parametrized by a frequency. For example</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(2000Q1)</code><code class="nohighlight hljs ansi" style="display:block;">MIT{Quarterly}</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; typeof(2021M5 - 2020M3)</code><code class="nohighlight hljs ansi" style="display:block;">Duration{Monthly}</code></pre><h3 id="Arithmetic-with-Time"><a class="docs-heading-anchor" href="#Arithmetic-with-Time">Arithmetic with Time</a><a id="Arithmetic-with-Time-1"></a><a class="docs-heading-anchor-permalink" href="#Arithmetic-with-Time" title="Permalink"></a></h3><p>We can perform arithmetic operations with values of type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a>. We just saw that the difference of two <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> values is a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a> of the same frequency. Conversely, we can add an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> and a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a> to get an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>. We can add and subtract two <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a>s, but we&#39;re not allowed to add two <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>s, only subtract them.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; a = 2001Q2 - 2000Q1  # the result is a Duration{Quarterly}</code><code class="nohighlight hljs ansi" style="display:block;">5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; b = 2001Q2 + 2000Q1  # doesn&#39;t make sense!</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: ArgumentError: Illegal addition of two `MIT` values.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; 2021Q3 + a  # same difference</code><code class="nohighlight hljs ansi" style="display:block;">2022Q4</code></pre><p>When we have an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> plus or minus a plain <code>Integer</code>, the latter is automatically converted to a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a> of the appropriate frequency. This should make our code more readable.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; 2000Q1 + Duration{Quarterly}(6)  # this is clunky</code><code class="nohighlight hljs ansi" style="display:block;">2001Q3</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; 2000Q1 + 6 # same as above</code><code class="nohighlight hljs ansi" style="display:block;">2001Q3</code></pre><p>We&#39;re not allowed to mix frequencies.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; 2000Q1 + Duration{Monthly}(6)</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: ArgumentError: Mixing frequencies not allowed: Quarterly and Monthly.</code></pre><p>Other arithmetic operations involving <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>s and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a>s, either with each other or with <code>Integer</code>s are not allowed.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; 2000Q1 * 5</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: ArgumentError: Invalid arithmetic operation with Int64 and MIT{Quarterly}</code></pre><h3 id="Other-Operations"><a class="docs-heading-anchor" href="#Other-Operations">Other Operations</a><a id="Other-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#Other-Operations" title="Permalink"></a></h3><p>The function <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.frequencyof"><code>frequencyof</code></a> returns the frequency type of its argument.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; frequencyof(2000Y)</code><code class="nohighlight hljs ansi" style="display:block;">Yearly</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; frequencyof(2020Q1 - 2019Q3)</code><code class="nohighlight hljs ansi" style="display:block;">Quarterly</code></pre><p>There are a few operations which are valid only for frequencies based on periods per year. The function <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.ppy"><code>ppy</code></a> returns the number of periods, while <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.year-Tuple{MIT}"><code>year</code></a> and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.period-Tuple{MIT}"><code>period</code></a> return the year and the period number. The periods are numbered from <code>1</code> to <code>ppy</code>. If we need both, we can use <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.mit2yp"><code>mit2yp</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t = 2020Q3</code><code class="nohighlight hljs ansi" style="display:block;">2020Q3</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ppy(t)</code><code class="nohighlight hljs ansi" style="display:block;">4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; year(t)</code><code class="nohighlight hljs ansi" style="display:block;">2020</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; period(t)</code><code class="nohighlight hljs ansi" style="display:block;">3</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; mit2yp(t)</code><code class="nohighlight hljs ansi" style="display:block;">(2020, 3)</code></pre><h2 id="Ranges"><a class="docs-heading-anchor" href="#Ranges">Ranges</a><a id="Ranges-1"></a><a class="docs-heading-anchor-permalink" href="#Ranges" title="Permalink"></a></h2><p>We can create a range of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> the same way we create ranges of integers. The standard Julia operations with ranges work on <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> ranges as well.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; rng = 2000M1:2001M9</code><code class="nohighlight hljs ansi" style="display:block;">2000M1:2001M9</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; length(rng)</code><code class="nohighlight hljs ansi" style="display:block;">21</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; first(rng)</code><code class="nohighlight hljs ansi" style="display:block;">2000M1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; last(rng)</code><code class="nohighlight hljs ansi" style="display:block;">2001M9</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; rng[3:5]   # subrange</code><code class="nohighlight hljs ansi" style="display:block;">2000M3:2000M5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; rng .+ 6  # shift forward by 6 periods</code><code class="nohighlight hljs ansi" style="display:block;">2000M7:2002M3</code></pre><p>We can also create a range where the step is not 1 but some other integer. Technically the step should be a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Duration"><code>Duration</code></a>, but once again we can use an <code>Integer</code> for convenience.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; rng2 = 2000M1:2:2000M8</code><code class="nohighlight hljs ansi" style="display:block;">2000M1:2:2000M7</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; collect(rng2)</code><code class="nohighlight hljs ansi" style="display:block;">4-element Vector{MIT{Monthly}}:
 2000M1
 2000M3
 2000M5
 2000M7</code></pre><p>We can create a range that runs backwards by swapping the endpoints and making the step <code>-1</code>. But it is easier to call the standard Julia function <a href="https://docs.julialang.org/en/v1/base/iterators/#Base.Iterators.reverse"><code>reverse</code></a>. This can be helpful when using <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.@rec-Tuple{Any, Any}"><code>@rec</code></a> as shown below.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; rng</code><code class="nohighlight hljs ansi" style="display:block;">2000M1:2001M9</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; reverse(rng)</code><code class="nohighlight hljs ansi" style="display:block;">2001M9:-1:2000M1</code></pre><h2 id="Time-Series-2"><a class="docs-heading-anchor" href="#Time-Series-2">Time Series</a><a class="docs-heading-anchor-permalink" href="#Time-Series-2" title="Permalink"></a></h2><p>TimeSeriesEcon provides the data type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> to represent a macro-economic time series. It is similar to a <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.Vector"><code>Vector</code></a>, but with added functionality for time series.</p><p>The <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> type inherits from the built-in <a href="https://docs.julialang.org/en/v1/base/arrays/#Core.AbstractArray"><code>AbstractArray</code></a> and supports all the basic operations of 1-dimensional arrays in Julia. Refer to the article on <a href="https://docs.julialang.org/en/v1/manual/arrays/#man-multi-dim-arrays">Multi-dimensional Arrays</a> in the Julia manual for details.</p><p>Type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> is also a generic data type. It depends on two type-parameters: its frequency and the data type of its elements.</p><h3 id="Creation-of-TSeries"><a class="docs-heading-anchor" href="#Creation-of-TSeries">Creation of <code>TSeries</code></a><a id="Creation-of-TSeries-1"></a><a class="docs-heading-anchor-permalink" href="#Creation-of-TSeries" title="Permalink"></a></h3><h4 id="Constructors"><a class="docs-heading-anchor" href="#Constructors">Constructors</a><a id="Constructors-1"></a><a class="docs-heading-anchor-permalink" href="#Constructors" title="Permalink"></a></h4><p>The basic constructor of a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> requires an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> (to label the first observation) and a vector of data.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; vals = rand(5)</code><code class="nohighlight hljs ansi" style="display:block;">5-element Vector{Float64}:
 0.5606491968806149
 0.4544200448230379
 0.7522448328488733
 0.47514256612546246
 0.3356329582464409</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ts = TSeries(2020Q1, vals)</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2020Q1:2021Q1:
  2020Q1 : 0.5606491968806149
  2020Q2 : 0.4544200448230379
  2020Q3 : 0.7522448328488733
  2020Q4 : 0.47514256612546246
  2021Q1 : 0.3356329582464409</code></pre><p>The frequency of the given <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> determines the frequency of the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>. Similarly, the type of the elements of the <code>vals</code> array determines the element type of the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>.</p><div class="admonition is-info"><header class="admonition-header">Important Caveat</header><div class="admonition-body"><p>Be mindful of the fact that the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> does not copy the original data container. Rather, the <code>ts</code> constructed above is just a wrapper and uses <code>vals</code> for its storage. Specifically, every modification to one of them is immediately reflected in the other. To break the connection use <a href="https://docs.julialang.org/en/v1/base/base/#Base.copy"><code>copy</code></a>.</p><pre><code class="language- hljs">ts = TSeries(2020Q1, copy(vals))</code></pre></div></div><p>We can construct a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> with its own storage from just an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> range. This would construct a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> whose storage is un-initialized (it would contain some arbitrary numbers). We can initialize the storage by providing a constant or a function, such as <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.zeros"><code>zeros</code></a>, <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.ones"><code>ones</code></a>, <a href="https://docs.julialang.org/en/v1/stdlib/Random/#Base.rand"><code>rand</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; rng = 2020Q1:2021Q4</code><code class="nohighlight hljs ansi" style="display:block;">2020Q1:2021Q4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; TSeries(rng)  # uninitialized (arbitrary numbers that happen to be in memory)</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly} with range 2020Q1:2021Q4:
  2020Q1 : 0.0
  2020Q2 : 0.0
  2020Q3 : 0.0
  2020Q4 : 0.0
  2021Q1 : 0.0
  2021Q2 : 0.0
  2021Q3 : 0.0
  2021Q4 : 0.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; TSeries(rng, pi)    # constant</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly,Irrational{:π}} with range 2020Q1:2021Q4:
  2020Q1 : π
  2020Q2 : π
  2020Q3 : π
  2020Q4 : π
  2021Q1 : π
  2021Q2 : π
  2021Q3 : π
  2021Q4 : π</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; TSeries(rng, rand)  # random numbers</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly} with range 2020Q1:2021Q4:
  2020Q1 : 0.013883380739549755
  2020Q2 : 0.18419301065952964
  2020Q3 : 0.9186196295656661
  2020Q4 : 0.13547369987434033
  2021Q1 : 0.54806018803053
  2021Q2 : 0.509579831635176
  2021Q3 : 0.6181796336895128
  2021Q4 : 0.8849531103814627</code></pre><div class="admonition is-info"><header class="admonition-header">Important</header><div class="admonition-body"><p>Be mindful of the type of the constant you provide as initializer. Specifically, in Julia <code>0</code> is of type <a href="https://docs.julialang.org/en/v1/manual/integers-and-floating-point-numbers/"><code>Int</code></a> while <code>0.0</code> is of type <a href="https://docs.julialang.org/en/v1/manual/integers-and-floating-point-numbers/"><code>Float64</code></a>. If you&#39;re never going to work with <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> that store integers (most people), then we recommend you get used to the idiom <code>TSeries(rng, zeros)</code>, which does what you expect.</p><pre><code class="language- hljs">TSeries(rng,0)   # element type is Int
TSeries(rng, zeros) # element type is FLoat64</code></pre></div></div><h4 id="Other-ways-to-construct-TSeries"><a class="docs-heading-anchor" href="#Other-ways-to-construct-TSeries">Other ways to construct <code>TSeries</code></a><a id="Other-ways-to-construct-TSeries-1"></a><a class="docs-heading-anchor-permalink" href="#Other-ways-to-construct-TSeries" title="Permalink"></a></h4><p>We can also construct new <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> from existing <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>. The function <a href="../../../Reference/TimeSeriesEcon/#Base.similar-Tuple{TSeries}"><code>similar(::TSeries)</code></a> creates an uninitialized copy, meaning that the copy has the same frequency and element type, but the storage contains arbitrary values. This is useful if we just want a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> that we will fill in later. The other useful function is <a href="https://docs.julialang.org/en/v1/base/base/#Base.copy"><code>copy</code></a>, which makes an exact copy. In both cases the new and the old <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> have separate storage.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t = TSeries(rng, 2.7)</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly} with range 2020Q1:2021Q4:
  2020Q1 : 2.7
  2020Q2 : 2.7
  2020Q3 : 2.7
  2020Q4 : 2.7
  2021Q1 : 2.7
  2021Q2 : 2.7
  2021Q3 : 2.7
  2021Q4 : 2.7</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; s = similar(t)</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly} with range 2020Q1:2021Q4:
  2020Q1 : 6.90577311326086e-310
  2020Q2 : 6.90577311326086e-310
  2020Q3 : 6.90577311326086e-310
  2020Q4 : 6.90577311326086e-310
  2021Q1 : 6.90577311326086e-310
  2021Q2 : 6.90577311326086e-310
  2021Q3 : 6.90577311326086e-310
  2021Q4 : 6.90577311326086e-310</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; c = copy(t)</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly} with range 2020Q1:2021Q4:
  2020Q1 : 2.7
  2020Q2 : 2.7
  2020Q3 : 2.7
  2020Q4 : 2.7
  2021Q1 : 2.7
  2021Q2 : 2.7
  2021Q3 : 2.7
  2021Q4 : 2.7</code></pre><p>New <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> are also the results of arithmetic and other operation, which we discuss later in this tutorial.</p><h3 id="Access-to-Elements-of-TSeries"><a class="docs-heading-anchor" href="#Access-to-Elements-of-TSeries">Access to Elements of <code>TSeries</code></a><a id="Access-to-Elements-of-TSeries-1"></a><a class="docs-heading-anchor-permalink" href="#Access-to-Elements-of-TSeries" title="Permalink"></a></h3><h4 id="Reading-(Indexing)"><a class="docs-heading-anchor" href="#Reading-(Indexing)">Reading (Indexing)</a><a id="Reading-(Indexing)-1"></a><a class="docs-heading-anchor-permalink" href="#Reading-(Indexing)" title="Permalink"></a></h4><p>We can access the value for a specific <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> using the standard indexing notation in Julia.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; rng = 2000Q1:2001Q1;</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t = TSeries(rng, rand)</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2000Q1:2001Q1:
  2000Q1 : 0.1141607918898494
  2000Q2 : 0.4688853523611981
  2000Q3 : 0.3735870887747511
  2000Q4 : 0.2661204915766663
  2001Q1 : 0.43057394721852926</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[2000Q1]</code><code class="nohighlight hljs ansi" style="display:block;">0.1141607918898494</code></pre><p>If we ask for a range of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>, the result is a new <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[2000Q2:2000Q4]</code><code class="nohighlight hljs ansi" style="display:block;">3-element TSeries{Quarterly} with range 2000Q2:2000Q4:
  2000Q2 : 0.4688853523611981
  2000Q3 : 0.3735870887747511
  2000Q4 : 0.2661204915766663</code></pre><p>We can also use integers. In this case the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> behaves like a <code>Vector</code>. The valid integer bounds are <code>1:length(ts)</code>. Note that if we use an integer range, the result is a <code>Vector</code>, not a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[1]</code><code class="nohighlight hljs ansi" style="display:block;">0.1141607918898494</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[2:4]</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 0.4688853523611981
 0.3735870887747511
 0.2661204915766663</code></pre><p>If we attempt to read outside the stored range, we would get a <code>BoundsError</code>, which is the same for <code>Vector</code>s.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[1999Q1]</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: BoundsError: attempt to access 5-element TSeries{Quarterly} with range 2000Q1:2001Q1 at index [1999Q1]</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[2001Q1:2001Q3]</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: BoundsError: attempt to access 5-element TSeries{Quarterly} with range 2000Q1:2001Q1 at index [2001Q1:2001Q3]</code></pre><p>When specifying a range, we can use <code>begin</code> and <code>end</code> inside the <code>[]</code>. This works exactly the same way for <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> as it does for the built-in <code>Vector</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[end-2:end]   # last 3</code><code class="nohighlight hljs ansi" style="display:block;">3-element TSeries{Quarterly} with range 2000Q3:2001Q1:
  2000Q3 : 0.3735870887747511
  2000Q4 : 0.2661204915766663
  2001Q1 : 0.43057394721852926</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[begin+1:end-1]  # drop first and last</code><code class="nohighlight hljs ansi" style="display:block;">3-element TSeries{Quarterly} with range 2000Q2:2000Q4:
  2000Q2 : 0.4688853523611981
  2000Q3 : 0.3735870887747511
  2000Q4 : 0.2661204915766663</code></pre><div class="admonition is-info"><header class="admonition-header">Important</header><div class="admonition-body"><p>Keep in mind that <code>begin</code> and <code>end</code> for <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> are of type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>. Specifically, when using them we must make sure that both limits of the range evaluate to <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> and not integer. For example, <code>julia ts[1:end-1]  # error</code> will result in an error because the first limit is 1, an <code>Int</code>, while the last limit is <code>lastdate(ts)-1</code>, an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>). To make this work we need this. <code>julia ts[begin:end-1] # correct</code> </p></div></div><h4 id="Writing-(Indexed-Assignment)"><a class="docs-heading-anchor" href="#Writing-(Indexed-Assignment)">Writing (Indexed Assignment)</a><a id="Writing-(Indexed-Assignment)-1"></a><a class="docs-heading-anchor-permalink" href="#Writing-(Indexed-Assignment)" title="Permalink"></a></h4><p>When indexing is used on the left side of an assignment, we&#39;re updating the specified element(s) of the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>. Again, this works the same as with <code>Vector</code>s.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[2000Q2] = 5</code><code class="nohighlight hljs ansi" style="display:block;">5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2000Q1:2001Q1:
  2000Q1 : 0.1141607918898494
  2000Q2 : 5.0
  2000Q3 : 0.3735870887747511
  2000Q4 : 0.2661204915766663
  2001Q1 : 0.43057394721852926</code></pre><p>When assigning to multiple locations (e.g., over a range), we must ensure that the number of values provided on the right-hand side is correct. Otherwise we would get an error.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[begin:begin + 2] = [1, 2, 3]</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Int64}:
 1
 2
 3</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2000Q1:2001Q1:
  2000Q1 : 1.0
  2000Q2 : 2.0
  2000Q3 : 3.0
  2000Q4 : 0.2661204915766663
  2001Q1 : 0.43057394721852926</code></pre><p>If we want to assign a single value to multiple locations we have to make the assignment a <a href="https://docs.julialang.org/en/v1/manual/mathematical-operations/#man-dot-operators"><code>vectorized &quot;dot&quot; operation</code></a>. For this we use <code>.=</code> instead of <code>=</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[end-2:end] .= 42</code><code class="nohighlight hljs ansi" style="display:block;">3-element TSeries{Quarterly} with range 2000Q3:2001Q1:
  2000Q3 : 42.0
  2000Q4 : 42.0
  2001Q1 : 42.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2000Q1:2001Q1:
  2000Q1 : 1.0
  2000Q2 : 2.0
  2000Q3 : 42.0
  2000Q4 : 42.0
  2001Q1 : 42.0</code></pre><p>The same way we can reset the entire <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> to a constant using <code>.=</code> without specifying the range. This would update the existing <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> in place.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t .= pi</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2000Q1:2001Q1:
  2000Q1 : 3.141592653589793
  2000Q2 : 3.141592653589793
  2000Q3 : 3.141592653589793
  2000Q4 : 3.141592653589793
  2001Q1 : 3.141592653589793</code></pre><p>Without the dot, i.e., <code>t = pi</code>, <code>t</code> would become a completely different variable with value <code>pi</code>.</p><p>Unlike <code>Vector</code>s, with <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> we are allowed to assign outside the stored range. Doing this resizes the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> as necessary. If there is a gap, that is a part of the new range which is neither in the old range nor in the assignment range, it is filled with <code>NaN</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[1999Q1:1999Q2] .= -3.7</code><code class="nohighlight hljs ansi" style="display:block;">2-element TSeries{Quarterly} with range 1999Q1:1999Q2:
  1999Q1 : -3.7
  1999Q2 : -3.7</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t</code><code class="nohighlight hljs ansi" style="display:block;">9-element TSeries{Quarterly} with range 1999Q1:2001Q1:
  1999Q1 : -3.7
  1999Q2 : -3.7
  1999Q3 : NaN
  1999Q4 : NaN
  2000Q1 : 3.141592653589793
  2000Q2 : 3.141592653589793
  2000Q3 : 3.141592653589793
  2000Q4 : 3.141592653589793
  2001Q1 : 3.141592653589793</code></pre><p>This only works with <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> indexing. If an integer index is out of bounds, the attempted assignment will result in the usual <code>BoundsError</code>, which is what we would get with a <code>Vector</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[15] = 3.5   # results in an error</code><code class="nohighlight hljs ansi" style="display:block;">ERROR: BoundsError: attempt to access 9-element Vector{Float64} at index [15]</code></pre><p>The vectorized &quot;dot&quot; assignment allows us to copy values from another <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>. In this case, the specified range on the left of <code>.=</code> applies to the right side too. In other words, the values from the right hand side will be taken from the range of the assignment.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; q = TSeries(rangeof(t), 100)</code><code class="nohighlight hljs ansi" style="display:block;">9-element TSeries{Quarterly,Int64} with range 1999Q1:2001Q1:
  1999Q1 : 100
  1999Q2 : 100
  1999Q3 : 100
  1999Q4 : 100
  2000Q1 : 100
  2000Q2 : 100
  2000Q3 : 100
  2000Q4 : 100
  2001Q1 : 100</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t[1999Q3:2000Q2] .= q</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 1999Q3:2000Q2:
  1999Q3 : 100.0
  1999Q4 : 100.0
  2000Q1 : 100.0
  2000Q2 : 100.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; t</code><code class="nohighlight hljs ansi" style="display:block;">9-element TSeries{Quarterly} with range 1999Q1:2001Q1:
  1999Q1 : -3.7
  1999Q2 : -3.7
  1999Q3 : 100.0
  1999Q4 : 100.0
  2000Q1 : 100.0
  2000Q2 : 100.0
  2000Q3 : 3.141592653589793
  2000Q4 : 3.141592653589793
  2001Q1 : 3.141592653589793</code></pre><h2 id="Arithmetic-with-TSeries"><a class="docs-heading-anchor" href="#Arithmetic-with-TSeries">Arithmetic with <code>TSeries</code></a><a id="Arithmetic-with-TSeries-1"></a><a class="docs-heading-anchor-permalink" href="#Arithmetic-with-TSeries" title="Permalink"></a></h2><p>There are two kinds of arithmetic operations with <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>. One kind is where we treat the time series as a single object. Similarly to vectors, we have addition of time series and multiplication of a time series by a scalar number. The other kind of arithmetic is where we treat the time series as a collection of numbers and do the operations element-wise.</p><p>In both cases, if there are multiple time series involved in an expression they must all be of the same frequency, otherwise the operation is generally not well defined.</p><p>When we add (or subtract) two or more <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> their ranges are not required to be identical. The resulting <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> has a range containing the common part of all ranges. This is in spirit with the idea that we treat values of a time series outside of its range as unknown or missing, so the result of arithmetic with unknown values remains unknown.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = TSeries(20Q1:20Q4, rand)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 0.6858520539299797
    20Q2 : 0.5966343440959738
    20Q3 : 0.6256561629539876
    20Q4 : 0.5110184129216789</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; y = TSeries(20Q3:21Q2, rand)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q3:21Q2:
    20Q3 : 0.21252907467762527
    20Q4 : 0.9793733901888247
    21Q1 : 0.9088873109969495
    21Q2 : 0.8637153478623378</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x + y</code><code class="nohighlight hljs ansi" style="display:block;">2-element TSeries{Quarterly} with range 20Q3:20Q4:
    20Q3 : 0.8381852376316129
    20Q4 : 1.4903918031105037</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x - y</code><code class="nohighlight hljs ansi" style="display:block;">2-element TSeries{Quarterly} with range 20Q3:20Q4:
    20Q3 : 0.41312708827636235
    20Q4 : -0.4683549772671458</code></pre><p>When we multiply (or divide) a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> by a scalar the resulting <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> has the same range as the original.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; 2y</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q3:21Q2:
    20Q3 : 0.42505814935525055
    20Q4 : 1.9587467803776495
    21Q1 : 1.817774621993899
    21Q2 : 1.7274306957246757</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; y/2</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q3:21Q2:
    20Q3 : 0.10626453733881264
    20Q4 : 0.48968669509441237
    21Q1 : 0.45444365549847476
    21Q2 : 0.4318576739311689</code></pre><p>For element-wise operations we use Julia&#39;s <a href="https://docs.julialang.org/en/v1/manual/mathematical-operations/#man-dot-operators">&quot;dot&quot; notation</a>. This notation is used for vectorized and broadcasting operations. The time series are aligned so that element-wise operations are performed on matching <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> across all <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> in the expression. For this reason, once again, they all must have the same frequency and the range of the result is the intersection of all ranges.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; log.(x)   # use dot for vectorized function call</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : -0.3770933393403568
    20Q2 : -0.5164508421889858
    20Q3 : -0.46895431923770975
    20Q4 : -0.6713496563127781</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; 1 .+ x    # broadcasting addition of scalar 1 to time series x</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 1.6858520539299797
    20Q2 : 1.5966343440959738
    20Q3 : 1.6256561629539876
    20Q4 : 1.511018412921679</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x .+ y    # vectorized addition (same as regular addition of TSeries)</code><code class="nohighlight hljs ansi" style="display:block;">2-element TSeries{Quarterly} with range 20Q3:20Q4:
    20Q3 : 0.8381852376316129
    20Q4 : 1.4903918031105037</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; 2 ./ y    # broadcasting division division</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q3:21Q2:
    20Q3 : 9.410477145462098
    20Q4 : 2.04212205481139
    21Q1 : 2.200492817757814
    21Q2 : 2.3155777015540164</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; y .^ 3    # broadcasting y-cubed</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q3:21Q2:
    20Q3 : 0.009599642374161388
    20Q4 : 0.9393877659271849
    21Q1 : 0.750810125281839
    21Q2 : 0.6443352789520347</code></pre><p>When assigning the result of a broadcasting operation within an existing <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> we have to use <code>.=</code> and may optionally specify a range on the left-hand side. When we specify a range on the left-hand side the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> on the left is resized, if necessary, to include the given range.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; z = copy(x)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 0.6858520539299797
    20Q2 : 0.5966343440959738
    20Q3 : 0.6256561629539876
    20Q4 : 0.5110184129216789</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; z .=  1 .+ y  # assign only within the common range of x and y</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 0.6858520539299797
    20Q2 : 0.5966343440959738
    20Q3 : 1.2125290746776254
    20Q4 : 1.9793733901888246</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; z</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 0.6858520539299797
    20Q2 : 0.5966343440959738
    20Q3 : 1.2125290746776254
    20Q4 : 1.9793733901888246</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; z[rangeof(y)] .= 3 .+ y  # resize x and assign within the full range of y</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q3:21Q2:
    20Q3 : 3.2125290746776254
    20Q4 : 3.9793733901888246
    21Q1 : 3.9088873109969495
    21Q2 : 3.863715347862338</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; z</code><code class="nohighlight hljs ansi" style="display:block;">6-element TSeries{Quarterly} with range 20Q1:21Q2:
    20Q1 : 0.6858520539299797
    20Q2 : 0.5966343440959738
    20Q3 : 3.2125290746776254
    20Q4 : 3.9793733901888246
    21Q1 : 3.9088873109969495
    21Q2 : 3.863715347862338</code></pre><p>Broadcasting operations also can be done with mixing <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> and <code>Vector</code>s in the same expression. In this case, the <code>Vector</code> must be of the same length as the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> and the result is a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; v = 3ones(size(x))</code><code class="nohighlight hljs ansi" style="display:block;">4-element Vector{Float64}:
 3.0
 3.0
 3.0
 3.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x .+ v</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 3.6858520539299797
    20Q2 : 3.596634344095974
    20Q3 : 3.6256561629539874
    20Q4 : 3.511018412921679</code></pre><h2 id="Time-Series-Operations"><a class="docs-heading-anchor" href="#Time-Series-Operations">Time Series Operations</a><a id="Time-Series-Operations-1"></a><a class="docs-heading-anchor-permalink" href="#Time-Series-Operations" title="Permalink"></a></h2><h3 id="Shifts"><a class="docs-heading-anchor" href="#Shifts">Shifts</a><a id="Shifts-1"></a><a class="docs-heading-anchor-permalink" href="#Shifts" title="Permalink"></a></h3><p>The lag or lead of a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> is an operation where the data remains the same but the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> labels are shifted accordingly. Functions <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.lag"><code>lag</code></a> and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.lead"><code>lead</code></a> produce a new <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>, while <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.lag!"><code>lag!</code></a> and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.lead!"><code>lead!</code></a> modify the given <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> in place. A second integer argument <code>n</code> can be provided to indicate which lag or lead is desired, if something other than 1.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; lag(x)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q2:21Q1:
    20Q2 : 0.6858520539299797
    20Q3 : 0.5966343440959738
    20Q4 : 0.6256561629539876
    21Q1 : 0.5110184129216789</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; lead(x)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 19Q4:20Q3:
    19Q4 : 0.6858520539299797
    20Q1 : 0.5966343440959738
    20Q2 : 0.6256561629539876
    20Q3 : 0.5110184129216789</code></pre><h3 id="Diff-and-Undiff"><a class="docs-heading-anchor" href="#Diff-and-Undiff">Diff and Undiff</a><a id="Diff-and-Undiff-1"></a><a class="docs-heading-anchor-permalink" href="#Diff-and-Undiff" title="Permalink"></a></h3><p>The first difference of a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> can be computed with the built-in function <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.diff"><code>diff</code></a>. The built-in version works for any <code>Vector</code>, including <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>. In addition, for time series version of <a href="../../../Reference/TimeSeriesEcon/#Base.diff"><code>diff</code></a> allows a second integer argument <code>k</code> to indicate which lag or lead to subtract. The default is <code>k=-1</code>, where a negative value of <code>k</code> indicates a lag and a positive value indicates a lead.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; dx = diff(x)</code><code class="nohighlight hljs ansi" style="display:block;">3-element TSeries{Quarterly} with range 20Q2:20Q4:
    20Q2 : -0.0892177098340059
    20Q3 : 0.029021818858013804
    20Q4 : -0.1146377500323087</code></pre><p>The inverse operation can be done with the function <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.undiff"><code>undiff</code></a>. In its basic form it is the same as the built-in function <a href="https://docs.julialang.org/en/v1/base/arrays/#Base.cumsum"><code>cumsum</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; undiff(dx)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 0.0
    20Q2 : -0.0892177098340059
    20Q3 : -0.060195890975992095
    20Q4 : -0.1748336410083008</code></pre><p>We can see that the answer above does not equal <code>x</code>. This is because the first value of <code>x</code> was lost. <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.undiff"><code>undiff</code></a> allows us to specify an &quot;anchor&quot; in the form of <code>date =&gt; value</code>. In this case the resulting <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> will have the given value at the given date.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x2 = undiff(dx, firstdate(x) =&gt; first(x))</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 20Q1:20Q4:
    20Q1 : 0.6858520539299797
    20Q2 : 0.5966343440959738
    20Q3 : 0.6256561629539876
    20Q4 : 0.5110184129216789</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x ≈ x2</code><code class="nohighlight hljs ansi" style="display:block;">true</code></pre><div class="admonition is-info"><header class="admonition-header">Good to know</header><div class="admonition-body"><p>In the call to <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.undiff"><code>undiff</code></a> above we used <a href="https://docs.julialang.org/en/v1/base/collections/#Base.first"><code>first</code></a>, which is a built-in Julia function that returns the first value of a collection. We also used <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.firstdate-Tuple{TSeries}"><code>firstdate</code></a>, which works for <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> and returns the first date in the stored range of its argument.</p></div></div><h3 id="Moving-Average"><a class="docs-heading-anchor" href="#Moving-Average">Moving Average</a><a id="Moving-Average-1"></a><a class="docs-heading-anchor-permalink" href="#Moving-Average" title="Permalink"></a></h3><p>Moving average can be computed with a call to the function <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.moving"><code>moving</code></a>. It takes a second integer argument <code>n</code> which indicates the length of the window over which the moving average will be computed. If <code>n</code> is positive, the window is backwards-looking (includes lags), while negative <code>n</code> uses a forward-looking window (includes leads). The window always includes the current value (lag 0).</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; tt = TSeries(2020Q1, collect(Float64, 1:10))</code><code class="nohighlight hljs ansi" style="display:block;">10-element TSeries{Quarterly} with range 2020Q1:2022Q2:
  2020Q1 : 1.0
  2020Q2 : 2.0
  2020Q3 : 3.0
  2020Q4 : 4.0
  2021Q1 : 5.0
  2021Q2 : 6.0
  2021Q3 : 7.0
  2021Q4 : 8.0
  2022Q1 : 9.0
  2022Q2 : 10.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; moving(tt, -4)</code><code class="nohighlight hljs ansi" style="display:block;">7-element TSeries{Quarterly} with range 2020Q1:2021Q3:
  2020Q1 : 2.5
  2020Q2 : 3.5
  2020Q3 : 4.5
  2020Q4 : 5.5
  2021Q1 : 6.5
  2021Q2 : 7.5
  2021Q3 : 8.5</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; moving(tt, 6)</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2021Q2:2022Q2:
  2021Q2 : 3.5
  2021Q3 : 4.5
  2021Q4 : 5.5
  2022Q1 : 6.5
  2022Q2 : 7.5</code></pre><h3 id="Recursive-assignments"><a class="docs-heading-anchor" href="#Recursive-assignments">Recursive assignments</a><a id="Recursive-assignments-1"></a><a class="docs-heading-anchor-permalink" href="#Recursive-assignments" title="Permalink"></a></h3><p>Sometimes we need to construct a time series by recursive assignments. We can do this on one line with the macro <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.@rec-Tuple{Any, Any}"><code>@rec</code></a>. For example, we can simulate the impulse response of a simple AR(1) model. Say <code>math a_t = (1-\rho) a_{ss} + \rho a_{t-1} + \varepsilon_t.</code> Then we can compute the impulse response with the following snippet of code.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; a_ss = 1.0</code><code class="nohighlight hljs ansi" style="display:block;">1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ρ = 0.6</code><code class="nohighlight hljs ansi" style="display:block;">0.6</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a = fill(a_ss, 2020Q1:2022Q1)</code><code class="nohighlight hljs ansi" style="display:block;">9-element TSeries{Quarterly} with range 2020Q1:2022Q1:
  2020Q1 : 1.0
  2020Q2 : 1.0
  2020Q3 : 1.0
  2020Q4 : 1.0
  2021Q1 : 1.0
  2021Q2 : 1.0
  2021Q3 : 1.0
  2021Q4 : 1.0
  2022Q1 : 1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a[begin] += 0.1</code><code class="nohighlight hljs ansi" style="display:block;">1.1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; for t = firstdate(a)+1:lastdate(a)
           a[t] = (1-ρ)*a_ss + ρ*a[t-1]
       end</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a</code><code class="nohighlight hljs ansi" style="display:block;">9-element TSeries{Quarterly} with range 2020Q1:2022Q1:
  2020Q1 : 1.1
  2020Q2 : 1.06
  2020Q3 : 1.036
  2020Q4 : 1.0216
  2021Q1 : 1.01296
  2021Q2 : 1.007776
  2021Q3 : 1.0046656
  2021Q4 : 1.00279936
  2022Q1 : 1.001679616</code></pre><p>We can rewrite the last loop more succinctly like this:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; @rec rangeof(a, drop=1) a[t] = (1-ρ)*a_ss + ρ*a[t-1]</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a</code><code class="nohighlight hljs ansi" style="display:block;">9-element TSeries{Quarterly} with range 2020Q1:2022Q1:
  2020Q1 : 1.1
  2020Q2 : 1.06
  2020Q3 : 1.036
  2020Q4 : 1.0216
  2021Q1 : 1.01296
  2021Q2 : 1.007776
  2021Q3 : 1.0046656
  2021Q4 : 1.00279936
  2022Q1 : 1.001679616</code></pre><p>The first argument of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.@rec-Tuple{Any, Any}"><code>@rec</code></a> is the range over which the loop will run. In this case we&#39;re using <code>rangeof(a, drop=1)</code>. Function <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.rangeof"><code>rangeof</code></a> normally returns the stored range of a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>. With the optional parameter <code>drop=n</code> we request that the first <code>n</code> periods be skipped. If <code>n</code> is negative, then the periods will be skipped at the end.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; (rangeof(a), rangeof(a, drop=1), rangeof(a, drop=-1))</code><code class="nohighlight hljs ansi" style="display:block;">(2020Q1:2022Q1, 2020Q2:2022Q1, 2020Q1:2021Q4)</code></pre><p>Note also that whether using <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.@rec-Tuple{Any, Any}"><code>@rec</code></a> or spelling out the for-loop explicitly, the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> will be resized if necessary. However, it is more efficient to preallocate the entire range by calling <a href="../../../Reference/TimeSeriesEcon/#Base.resize!-Tuple{TSeries, AbstractUnitRange{&lt;:MIT}}"><code>resize!</code></a> first.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; resize!(a, 2020Q1:2023Q1)</code><code class="nohighlight hljs ansi" style="display:block;">13-element TSeries{Quarterly} with range 2020Q1:2023Q1:
  2020Q1 : 1.1
  2020Q2 : 1.06
  2020Q3 : 1.036
  2020Q4 : 1.0216
  2021Q1 : 1.01296
  2021Q2 : 1.007776
  2021Q3 : 1.0046656
  2021Q4 : 1.00279936
  2022Q1 : 1.001679616
  2022Q2 : NaN
  2022Q3 : NaN
  2022Q4 : NaN
  2023Q1 : NaN</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @rec rangeof(a, drop=1) a[t] = (1-ρ)*a_ss + ρ*a[t-1]</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; a</code><code class="nohighlight hljs ansi" style="display:block;">13-element TSeries{Quarterly} with range 2020Q1:2023Q1:
  2020Q1 : 1.1
  2020Q2 : 1.06
  2020Q3 : 1.036
  2020Q4 : 1.0216
  2021Q1 : 1.01296
  2021Q2 : 1.007776
  2021Q3 : 1.0046656
  2021Q4 : 1.00279936
  2022Q1 : 1.001679616
  2022Q2 : 1.0010077696000002
  2022Q3 : 1.0006046617600002
  2022Q4 : 1.000362797056
  2023Q1 : 1.0002176782336</code></pre><h2 id="Multi-variate-Time-Series"><a class="docs-heading-anchor" href="#Multi-variate-Time-Series">Multi-variate Time Series</a><a id="Multi-variate-Time-Series-1"></a><a class="docs-heading-anchor-permalink" href="#Multi-variate-Time-Series" title="Permalink"></a></h2><p>We can store multiple time series in a variable of type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>. This is a collection of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> with the same frequency, the same range, and the same element type. It is like a table, where each row corresponds to an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> and each column to a time series variable.</p><h3 id="Creation-of-MVTSeries"><a class="docs-heading-anchor" href="#Creation-of-MVTSeries">Creation of <code>MVTSeries</code></a><a id="Creation-of-MVTSeries-1"></a><a class="docs-heading-anchor-permalink" href="#Creation-of-MVTSeries" title="Permalink"></a></h3><p>The basic constructor of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> takes an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>, which indicates the label of the first row, a list of names for the columns, and a matrix of values. The number of columns in the given matrix must match the number of column names. The range of the resulting <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> is determined from the first date and the number of rows.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x = MVTSeries(2020Q1, (:a, :b), rand(6, 2))</code><code class="nohighlight hljs ansi" style="display:block;">6×2 MVTSeries{Quarterly} with range 2020Q1:2021Q2 and variables (a,b):
           a          b
  2020Q1 : 0.269667   0.351581
  2020Q2 : 0.823244   0.639409
  2020Q3 : 0.161536   0.0884888
  2020Q4 : 0.299086   0.250322
  2021Q1 : 0.731792   0.0702447
  2021Q2 : 0.0550195  0.736368</code></pre><p>Similarly to <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>, if we specify a range (rather than a single <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>), the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> will be able to allocate its own storage. In this case, we can optionally provide an initializer in the form of a constant value or a function.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; MVTSeries(2020Q1:2021Q3, (:one, :too, :tree), zeros)</code><code class="nohighlight hljs ansi" style="display:block;">7×3 MVTSeries{Quarterly} with range 2020Q1:2021Q3 and variables (one,too,…):
           one     too     tree
  2020Q1 : 0.0     0.0     0.0
  2020Q2 : 0.0     0.0     0.0
  2020Q3 : 0.0     0.0     0.0
  2020Q4 : 0.0     0.0     0.0
  2021Q1 : 0.0     0.0     0.0
  2021Q2 : 0.0     0.0     0.0
  2021Q3 : 0.0     0.0     0.0</code></pre><p>We can also build an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> from a range and a list of name-value pairs. The values can be <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>, vectors, or constants. In the case of a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>, the constructor will use the necessary range, while in the case of a vector must have the correct length. This form of the <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> constructor allocates its own storage space, so the data are always copied.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data = MVTSeries(2020Q1:2021Q1;
                   hex = TSeries(2019Q1, collect(Float64, 1:20)),
                   why = zeros(5),
                   zed = 3, )</code><code class="nohighlight hljs ansi" style="display:block;">5×3 MVTSeries{Quarterly} with range 2020Q1:2021Q1 and variables (hex,why,…):
           hex     why     zed
  2020Q1 : 5.0     0.0     3.0
  2020Q2 : 6.0     0.0     3.0
  2020Q3 : 7.0     0.0     3.0
  2020Q4 : 8.0     0.0     3.0
  2021Q1 : 9.0     0.0     3.0</code></pre><p>New <code>MVTSeries</code> variables can also be created with <a href="../../../Reference/TimeSeriesEcon/#Base.similar-Tuple{MVTSeries}"><code>similar(::MVTSeries)</code></a> and <a href="https://docs.julialang.org/en/v1/base/base/#Base.copy"><code>copy</code></a>. They are also the result of arithmetic operations. This is the same as with <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>, so we won&#39;t spend time repeating it.</p><h3 id="Access"><a class="docs-heading-anchor" href="#Access">Access</a><a id="Access-1"></a><a class="docs-heading-anchor-permalink" href="#Access" title="Permalink"></a></h3><p><a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> behaves like a 2-dimensional matrix when indexing is done with integers. Otherwise, we can also index using <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>s (or <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> ranges) for the row-indexes and <a href="https://docs.julialang.org/en/v1/manual/metaprogramming/#Symbols"><code>Symbol</code></a>s (or tuples of <a href="https://docs.julialang.org/en/v1/manual/metaprogramming/#Symbols"><code>Symbol</code></a>s) for the column-indexes.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data[2020Q2, :hex]</code><code class="nohighlight hljs ansi" style="display:block;">6.0</code></pre><p>An entire row can be accessed with a single <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> index.  The result of such indexing is a regular <code>Vector</code>.  In order to extract  an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> the index must be a unit range of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data[2020Q2]</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Float64}:
 6.0
 0.0
 3.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; data[2020Q2:2020Q2]  # index with range</code><code class="nohighlight hljs ansi" style="display:block;">1×3 MVTSeries{Quarterly} with range 2020Q2:2020Q2 and variables (hex,why,…):
           hex     why     zed
  2020Q2 : 6.0     0.0     3.0</code></pre><p>Similarly, we can extract an entire column by its name. The result is a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>.   If the index is a <a href="https://docs.julialang.org/en/v1/manual/functions/#Tuples">tuple</a> of names, then the result is another <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> containing only the selected columns.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; data[:zed]</code><code class="nohighlight hljs ansi" style="display:block;">5-element TSeries{Quarterly} with range 2020Q1:2021Q1:
  2020Q1 : 3.0
  2020Q2 : 3.0
  2020Q3 : 3.0
  2020Q4 : 3.0
  2021Q1 : 3.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; data[(:zed,)] # index with tuple</code><code class="nohighlight hljs ansi" style="display:block;">5×1 MVTSeries{Quarterly} with range 2020Q1:2021Q1 and variables (zed):
           zed
  2020Q1 : 3.0
  2020Q2 : 3.0
  2020Q3 : 3.0
  2020Q4 : 3.0
  2021Q1 : 3.0</code></pre><p>For convenience we can also access the columns by name using the traditional <code>data.zed</code> notation.</p><pre><code class="language- hljs">data.zed</code></pre><p>It is sometimes necessary to iterate over the columns of an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>. This can be done easily with the function <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.columns-Tuple{MVTSeries}"><code>columns</code></a>. The following snippet of code shows an idiom for such iteration.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Statistics</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; for (name, value) in columns(data)
           println(&quot;Average of `&quot;, name, &quot;` is &quot;, mean(value), &quot;.&quot;)
       end</code><code class="nohighlight hljs ansi" style="display:block;">Average of `hex` is 7.0.
Average of `why` is 0.0.
Average of `zed` is 3.0.</code></pre><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Note that <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.columns-Tuple{MVTSeries}"><code>columns</code></a> is specific to <code>MVTSeries</code>. The built-in function <a href="https://docs.julialang.org/en/v1/base/collections/#Base.pairs"><code>pairs</code></a> does the same for a general collection of name-value pairs. It also works for <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>.</p></div></div><h2 id="Plotting"><a class="docs-heading-anchor" href="#Plotting">Plotting</a><a id="Plotting-1"></a><a class="docs-heading-anchor-permalink" href="#Plotting" title="Permalink"></a></h2><p>Visualizing a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> is straight-forward.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot(a, 1 .+ 0.1*TSeries(2020M1:2023M1, rand), label=[&quot;a&quot; &quot;rand&quot;]);</code><code class="nohighlight hljs ansi" style="display:block;">┌ Warning: Keyword argument xformatter not supported with Plots.GRBackend().  Choose from: annotations, arrow, aspect_ratio, background_color, background_color_inside, background_color_outside, background_color_subplot, bar_width, bins, bottom_margin, camera, clims, color_palette, colorbar, colorbar_entry, colorbar_scale, colorbar_title, connections, contour_labels, discrete_values, fill_z, fillalpha, fillcolor, fillrange, fillstyle, flip, foreground_color, foreground_color_axis, foreground_color_border, foreground_color_grid, foreground_color_subplot, foreground_color_text, framestyle, grid, gridalpha, gridlinewidth, gridstyle, group, guide, guidefontcolor, guidefontfamily, guidefonthalign, guidefontrotation, guidefontsize, guidefontvalign, html_output_format, inset_subplots, label, layout, left_margin, legend_background_color, legend_font_color, legend_font_family, legend_font_halign, legend_font_pointsize, legend_font_rotation, legend_font_valign, legend_foreground_color, legend_position, legend_title, levels, lims, line_z, linealpha, linecolor, linestyle, linewidth, link, margin, marker_z, markeralpha, markercolor, markershape, markersize, markerstrokealpha, markerstrokecolor, markerstrokewidth, normalize, orientation, overwrite_figure, permute, polar, primary, projection, quiver, ribbon, right_margin, scale, series_annotations, seriesalpha, seriescolor, seriestype, show, show_empty_bins, size, smooth, subplot, subplot_index, tick_direction, tickfontcolor, tickfontfamily, tickfonthalign, tickfontrotation, tickfontsize, tickfontvalign, ticks, title, titlefontcolor, titlefontfamily, titlefonthalign, titlefontrotation, titlefontsize, titlefontvalign, top_margin, unitformat, weights, widen, window_title, x, xdiscrete_values, xerror, xflip, xforeground_color_axis, xforeground_color_border, xforeground_color_grid, xforeground_color_text, xgrid, xgridalpha, xgridlinewidth, xgridstyle, xguide, xguidefontcolor, xguidefontfamily, xguidefonthalign, xguidefontrotation, xguidefontsize, xguidefontvalign, xlims, xlink, xscale, xtick_direction, xtickfontcolor, xtickfontfamily, xtickfonthalign, xtickfontrotation, xtickfontsize, xtickfontvalign, xticks, xwiden, y, ydiscrete_values, yerror, yflip, yforeground_color_axis, yforeground_color_border, yforeground_color_grid, yforeground_color_text, ygrid, ygridalpha, ygridlinewidth, ygridstyle, yguide, yguidefontcolor, yguidefontfamily, yguidefonthalign, yguidefontrotation, yguidefontsize, yguidefontvalign, ylims, ylink, yscale, ytick_direction, ytickfontcolor, ytickfontfamily, ytickfonthalign, ytickfontrotation, ytickfontsize, ytickfontvalign, yticks, ywiden, z, z_order, zdiscrete_values, zerror, zflip, zforeground_color_axis, zforeground_color_border, zforeground_color_grid, zforeground_color_text, zgrid, zgridalpha, zgridlinewidth, zgridstyle, zguide, zguidefontcolor, zguidefontfamily, zguidefonthalign, zguidefontrotation, zguidefontsize, zguidefontvalign, zlims, zlink, zscale, ztick_direction, ztickfontcolor, ztickfontfamily, ztickfonthalign, ztickfontrotation, ztickfontsize, ztickfontvalign, zticks, zwiden
└ @ Plots ~/.julia/packages/Plots/modjX/src/args.jl:1553</code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p><a href="../plot-1.png"><img src="../plot-1.png" alt/></a></p><p>Similarly, we can plot all time series in an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> just as easily.   Each variable will appear in its own set of axes.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; db_a = MVTSeries(2020Q1:2023Q4,
           x = 0.5,
           y = 0:1/15:1,
           z = rand(16),
       )</code><code class="nohighlight hljs ansi" style="display:block;">16×3 MVTSeries{Quarterly} with range 2020Q1:2023Q4 and variables (x,y,z):
           x     y          z
  2020Q1 : 0.5   0.0        0.98271
  2020Q2 : 0.5   0.0666667  0.988881
  2020Q3 : 0.5   0.133333   0.652161
  2020Q4 : 0.5   0.2        0.972892
  2021Q1 : 0.5   0.266667   0.70075
  2021Q2 : 0.5   0.333333   0.566773
  2021Q3 : 0.5   0.4        0.414881
  2021Q4 : 0.5   0.466667   0.826539
  2022Q1 : 0.5   0.533333   0.481878
  2022Q2 : 0.5   0.6        0.504257
  2022Q3 : 0.5   0.666667   0.953621
  2022Q4 : 0.5   0.733333   0.12209
  2023Q1 : 0.5   0.8        0.688279
  2023Q2 : 0.5   0.866667   0.0498174
  2023Q3 : 0.5   0.933333   0.401495
  2023Q4 : 0.5   1.0        0.651769</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot(db_a, label=[&quot;db_a&quot;]);</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p><a href="../plot-2.png"><img src="../plot-2.png" alt/></a></p><p>We cal also plot several <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> at the same time.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; db_b = MVTSeries(2020Q1:2023Q4,
           y = 0.5,
           z = 1:-1/15:0,
           w = rand(16),
       )</code><code class="nohighlight hljs ansi" style="display:block;">16×3 MVTSeries{Quarterly} with range 2020Q1:2023Q4 and variables (y,z,w):
           y     z          w
  2020Q1 : 0.5   1.0        0.32498
  2020Q2 : 0.5   0.933333   0.564714
  2020Q3 : 0.5   0.866667   0.965699
  2020Q4 : 0.5   0.8        0.111891
  2021Q1 : 0.5   0.733333   0.543943
  2021Q2 : 0.5   0.666667   0.831466
  2021Q3 : 0.5   0.6        0.828638
  2021Q4 : 0.5   0.533333   0.578264
  2022Q1 : 0.5   0.466667   0.39703
  2022Q2 : 0.5   0.4        0.607967
  2022Q3 : 0.5   0.333333   0.797455
  2022Q4 : 0.5   0.266667   0.26199
  2023Q1 : 0.5   0.2        0.148891
  2023Q2 : 0.5   0.133333   0.593744
  2023Q3 : 0.5   0.0666667  0.560087
  2023Q4 : 0.5   0.0        0.852858</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot(db_a, db_b, label=[&quot;db_a&quot; &quot;db_b&quot;]);</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p><a href="../plot-3.png"><img src="../plot-3.png" alt/></a></p><p>We see that all variables are plotted as long as they appear in at least one of the given <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>. The plot can become very busy very quickly. There is also a limit of 10 variables (which will result in a 5<span>$\times$</span>2 grid). We can select which variables to plot with the option <code>vars=</code>. We can also restrict the range of the plot with <code>trange=</code>. Any other plot attributes work as usual.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; plot(db_a, db_b,
           label = [&quot;db_a&quot; &quot;db_b&quot;],
           vars = [:y, :z],
           trange = 2020Q3:2022Q3,
           layout = (2,1),
       );</code><code class="nohighlight hljs ansi" style="display:block;"></code><code class="nohighlight hljs ansi" style="display:block;"></code></pre><p><a href="../plot-4.png"><img src="../plot-4.png" alt/></a></p><div class="admonition is-info"><header class="admonition-header">Good to Know</header><div class="admonition-body"><p>The <code>trange=</code> argument works only when all time series in the plot have the same frequency. When plotting time series with different frequencies, you can use <code>xlim=</code>. You can use <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> in the limits specified by <code>xlim</code></p><ul><li>they are converted to floating point numbers automatically. For example <code>float(2020Q1) == 2020.0</code>, <code>float(2020Q2) = 2020.25</code>, etc. An important difference to keep in mind is that <code>trange=</code> requires a unit range, e.g., <code>trange=2020Q3:2022Q3</code>, while <code>xlim=</code> requires a tuple, e.g., <code>xlim=(2020Q3,2022Q3)</code>.</li></ul></div></div><h2 id="Workspaces"><a class="docs-heading-anchor" href="#Workspaces"><code>Workspace</code>s</a><a id="Workspaces-1"></a><a class="docs-heading-anchor-permalink" href="#Workspaces" title="Permalink"></a></h2><p>When working with models, in addition to time series data, we encounter a lot of other types of data. For example, parameter and steady state values, simulation ranges and dates, etc. The data type <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> is a container that can store all kinds of data. Most operations for <a href="https://docs.julialang.org/en/v1/base/collections/#Dictionaries">dictionaries</a> work also for <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a>s.</p><p>We can create an empty <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> and fill it with data. We can create <em>&quot;variables&quot;</em> in the workspace directly by assignment.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; w = Workspace()</code><code class="nohighlight hljs ansi" style="display:block;">Empty Workspace</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w.rng = 2020Q1:2021Q4</code><code class="nohighlight hljs ansi" style="display:block;">2020Q1:2021Q4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w.start = first(w.rng)</code><code class="nohighlight hljs ansi" style="display:block;">2020Q1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w.a = TSeries(w.rng)</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly} with range 2020Q1:2021Q4:
  2020Q1 : 0.0
  2020Q2 : 0.25
  2020Q3 : 0.5
  2020Q4 : 0.75
  2021Q1 : 1.0
  2021Q2 : 6.90573794916104e-310
  2021Q3 : 6.9057379491626e-310
  2021Q4 : 6.90573531777294e-310</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w.a .= a</code><code class="nohighlight hljs ansi" style="display:block;">8-element TSeries{Quarterly} with range 2020Q1:2021Q4:
  2020Q1 : 1.1
  2020Q2 : 1.06
  2020Q3 : 1.036
  2020Q4 : 1.0216
  2021Q1 : 1.01296
  2021Q2 : 1.007776
  2021Q3 : 1.0046656
  2021Q4 : 1.00279936</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 3-variables
    rng ⇒ 2020Q1:2021Q4
  start ⇒ 2020Q1
      a ⇒ 8-element TSeries{Quarterly} with range 2020Q1:2021Q4</code></pre><p>We can remove data from the workspace using the built-in function <a href="https://docs.julialang.org/en/v1/base/collections/#Base.delete!"><code>delete!</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; delete!(w, :start)</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 2-variables
  rng ⇒ 2020Q1:2021Q4
    a ⇒ 8-element TSeries{Quarterly} with range 2020Q1:2021Q4</code></pre><p>We can also give the constructor of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> a list of names and values like this:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; Workspace(rng = 2020Q1:2021Q4, alpha = 0.1, v = TSeries(2020Q1, rand(6)))</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 3-variables
    rng ⇒ 2020Q1:2021Q4
  alpha ⇒ 0.1
      v ⇒ 6-element TSeries{Quarterly} with range 2020Q1:2021Q2</code></pre><p>Equivalently, we can provide the whole list of name-value pairs as a single argument:</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; datalist = [:rng =&gt; 2020Q1:2021Q4, :alpha =&gt; 0.1, :v =&gt; TSeries(2020Q1, rand(6))]</code><code class="nohighlight hljs ansi" style="display:block;">3-element Vector{Pair{Symbol, Any}}:
   :rng =&gt; 2020Q1:2021Q4
 :alpha =&gt; 0.1
     :v =&gt; 6-element TSeries{Quarterly} with range 2020Q1:2021Q2:
  2020Q1 : 0.3797561098869928
  2020Q2 : 0.9620681800485846
  2020Q3 : 0.15559977423108784
  2020Q4 : 0.17160478014226987
  2021Q1 : 0.17045237036272054
  2021Q2 : 0.23444192753424076</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; Workspace(datalist)</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 3-variables
    rng ⇒ 2020Q1:2021Q4
  alpha ⇒ 0.1
      v ⇒ 6-element TSeries{Quarterly} with range 2020Q1:2021Q2</code></pre><p>The last one is particularly useful for converting an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> to a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a>, since we can use the <a href="../../../Reference/TimeSeriesEcon/#Base.pairs-Tuple{MVTSeries}"><code>pairs</code></a> function.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; w_a = Workspace(pairs(db_a; copy = true))</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 3-variables
  x ⇒ 16-element TSeries{Quarterly} with range 2020Q1:2023Q4
  y ⇒ 16-element TSeries{Quarterly} with range 2020Q1:2023Q4
  z ⇒ 16-element TSeries{Quarterly} with range 2020Q1:2023Q4</code></pre><p>Note that by default <code>copy=false</code>, which means that the time series in the new <code>w_a</code> would share their storage with the corresponding columns of <code>db_a</code>. This is more efficient than copying the data. However, if we need the new workspace to hold its own copy of the data, we can force that by setting <code>copy=true</code>.</p><p>The next example is an idiom for converting a workspace back to an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>. Note that in this case we always get a copy, so there&#39;s no optional parameter <code>copy=</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; MVTSeries(rangeof(w_a); pairs(w_a)...)</code><code class="nohighlight hljs ansi" style="display:block;">16×3 MVTSeries{Quarterly} with range 2020Q1:2023Q4 and variables (x,y,z):
           x     y          z
  2020Q1 : 0.5   0.0        0.98271
  2020Q2 : 0.5   0.0666667  0.988881
  2020Q3 : 0.5   0.133333   0.652161
  2020Q4 : 0.5   0.2        0.972892
  2021Q1 : 0.5   0.266667   0.70075
  2021Q2 : 0.5   0.333333   0.566773
  2021Q3 : 0.5   0.4        0.414881
  2021Q4 : 0.5   0.466667   0.826539
  2022Q1 : 0.5   0.533333   0.481878
  2022Q2 : 0.5   0.6        0.504257
  2022Q3 : 0.5   0.666667   0.953621
  2022Q4 : 0.5   0.733333   0.12209
  2023Q1 : 0.5   0.8        0.688279
  2023Q2 : 0.5   0.866667   0.0498174
  2023Q3 : 0.5   0.933333   0.401495
  2023Q4 : 0.5   1.0        0.651769</code></pre><p>In the above we used <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.rangeof-Tuple{Workspace}"><code>rangeof(::Workspace)</code></a> on the <code>Workspace</code> variable <code>w_a</code>, which returns the intersection of the ranges of all variables in the workspace. </p><h3 id="MVTSeries-vs-Workspace"><a class="docs-heading-anchor" href="#MVTSeries-vs-Workspace"><code>MVTSeries</code> vs <code>Workspace</code></a><a id="MVTSeries-vs-Workspace-1"></a><a class="docs-heading-anchor-permalink" href="#MVTSeries-vs-Workspace" title="Permalink"></a></h3><p>You&#39;ve probably already noticed the remarkable similarity between <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a>. Both are containers for <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> and in many ways are interchangeable. In both cases we can access data by name using the traditional &quot;dot&quot; notation (e.g., <code>db.x</code>), and we can also access them using indexing notation (e.g., db[:x]).</p><p>One important differences are that <code>MVTSeries</code> is a matrix, so we can use it for <a href="https://docs.julialang.org/en/v1/stdlib/LinearAlgebra/">linear algebra</a> and <a href="https://docs.julialang.org/en/v1/stdlib/Statistics/">statistics</a>. <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> also has the constraint that all variables are <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> with the same frequency.</p><p>In contrast, <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> is a dictionary, which can store variables of any type. So in a workspace we can have multiple time series of different frequencies. Also, a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> can contain nested <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> or <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a>s.</p><p>Another important difference is that we can add and delete variables in a workspace, while in an <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> the columns are fixed and in order to add or remove any column we must create a new <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> instance.</p><h2 id="overlay"><a class="docs-heading-anchor" href="#overlay"><code>overlay</code></a><a id="overlay-1"></a><a class="docs-heading-anchor-permalink" href="#overlay" title="Permalink"></a></h2><p>Function <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.overlay"><code>overlay</code></a> has two modes of operation: one is when all inputs are <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> and the other is when the arguments are a mixture of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>.</p><p>In the first case all time series must have the same frequency and the result is a new <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> whose range is the union of all ranges of the inputs. For each <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MIT"><code>MIT</code></a> the output will have the first non-missing value found in the inputs from left to right. (<code>NaN</code> is considered missing, as well as values outside the allocated range.)</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; x1 = TSeries(2020Q1:2020Q4, 1.0)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 2020Q1:2020Q4:
  2020Q1 : 1.0
  2020Q2 : 1.0
  2020Q3 : 1.0
  2020Q4 : 1.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x1[2020Q2:2020Q3] .= NaN</code><code class="nohighlight hljs ansi" style="display:block;">2-element TSeries{Quarterly} with range 2020Q2:2020Q3:
  2020Q2 : NaN
  2020Q3 : NaN</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x2 = TSeries(2019Q3:2020Q2, 2.0)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 2019Q3:2020Q2:
  2019Q3 : 2.0
  2019Q4 : 2.0
  2020Q1 : 2.0
  2020Q2 : 2.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x2[2019Q4:2020Q1] .= NaN</code><code class="nohighlight hljs ansi" style="display:block;">2-element TSeries{Quarterly} with range 2019Q4:2020Q1:
  2019Q4 : NaN
  2020Q1 : NaN</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; x3 = TSeries(2020Q2:2021Q1, 3.0)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 2020Q2:2021Q1:
  2020Q2 : 3.0
  2020Q3 : 3.0
  2020Q4 : 3.0
  2021Q1 : 3.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; MVTSeries(; x1, x2, x3, overlay = overlay(x1, x2, x3))</code><code class="nohighlight hljs ansi" style="display:block;">7×4 MVTSeries{Quarterly} with range 2019Q3:2021Q1 and variables (x1,x2,x3,…):
           x1       x2       x3       overlay
  2019Q3 : NaN        2.0    NaN        2.0
  2019Q4 : NaN      NaN      NaN      NaN
  2020Q1 :   1.0    NaN      NaN        1.0
  2020Q2 : NaN        2.0      3.0      2.0
  2020Q3 : NaN      NaN        3.0      3.0
  2020Q4 :   1.0    NaN        3.0      1.0
  2021Q1 : NaN      NaN        3.0      3.0</code></pre><p>We can force the output to have a specific range by putting that range as the first argument of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.overlay"><code>overlay</code></a></p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; overlay(2020Q1:2020Q4, x1, x2, x3)</code><code class="nohighlight hljs ansi" style="display:block;">4-element TSeries{Quarterly} with range 2020Q1:2020Q4:
  2020Q1 : 1.0
  2020Q2 : 2.0
  2020Q3 : 3.0
  2020Q4 : 1.0</code></pre><p>In the second case, when we call <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.overlay"><code>overlay</code></a> on a list of <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a> or <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> variables, the result is a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a> in which all variables are recursively overlaid. For example, a variable in the result is taken form the first input (from left to right) in which it is found. But if that variable is a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>, then it is overlaid from all inputs in which it appears. The same applies to other &quot;overlay-able&quot; data types, such as nested <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a>s and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; w1 = Workspace(; x = x1, a = 1)</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 2-variables
  x ⇒ 4-element TSeries{Quarterly} with range 2020Q1:2020Q4
  a ⇒ 1</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w2 = MVTSeries(; x = x2, b = 2)    # w2.b is a `TSeries`!</code><code class="nohighlight hljs ansi" style="display:block;">4×2 MVTSeries{Quarterly} with range 2019Q3:2020Q2 and variables (x,b):
           x       b
  2019Q3 :   2.0   2.0
  2019Q4 : NaN     2.0
  2020Q1 : NaN     2.0
  2020Q2 :   2.0   2.0</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w3 = Workspace(; x = x3, a = 3, b = 3, c = 3)</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 4-variables
  x ⇒ 4-element TSeries{Quarterly} with range 2020Q2:2021Q1
  a ⇒ 3
  b ⇒ 3
  c ⇒ 3</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; overlay(w1, w2, w3)</code><code class="nohighlight hljs ansi" style="display:block;">Workspace with 4-variables
  a ⇒ 1
  b ⇒ 4-element TSeries{Quarterly} with range 2019Q3:2020Q2
  c ⇒ 3
  x ⇒ 7-element TSeries{Quarterly} with range 2019Q3:2021Q1</code></pre><p>In the example above, <code>x</code> is a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> in all three inputs and so it is overlaid; <code>a</code> is a scalar taken from <code>w1</code>; <code>b</code> is a <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a> in <code>w2</code> and a scalar in <code>w3</code>, so it is not overlaid and instead it is simply taken from <code>w2</code>, because that&#39;s where it appears first; and finally <code>c</code> is taken from <code>w3</code>, since it is missing from the other two.</p><h2 id="compare-and-@compare"><a class="docs-heading-anchor" href="#compare-and-@compare"><code>compare</code> and <code>@compare</code></a><a id="compare-and-@compare-1"></a><a class="docs-heading-anchor-permalink" href="#compare-and-@compare" title="Permalink"></a></h2><p>The <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.compare"><code>compare</code></a> function and the accompanying <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.@compare"><code>@compare</code></a> macro can be used to compare two <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.Workspace"><code>Workspace</code></a>s or <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.MVTSeries"><code>MVTSeries</code></a>. The comparison is done recursively.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; v1 = Workspace(;
               x = 3,
               y = TSeries(2020Q1, ones(10)),
               z = MVTSeries(2020Q1, (:a, :b), rand(6,2)));</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; v2 = deepcopy(v1);    # always use deepcopy() with Workspace</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; v2.y[2020Q3] += 1e-7</code><code class="nohighlight hljs ansi" style="display:block;">1.0000001</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; v2.z.a[2020Q3] += 0.001</code><code class="nohighlight hljs ansi" style="display:block;">0.4473367057569444</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; v2.b = &quot;Hello&quot;</code><code class="nohighlight hljs ansi" style="display:block;">&quot;Hello&quot;</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; @compare(v1, v2)</code><code class="nohighlight hljs ansi" style="display:block;">_.b: missing in v1
_.y: different
_.z.a: different
_.z: different
_: different
false</code></pre><p>Numerical values, including <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.TSeries"><code>TSeries</code></a>, are compared using <a href="https://docs.julialang.org/en/v1/base/math/#Base.isapprox"><code>isapprox</code></a>. We can pass arguments to <a href="https://docs.julialang.org/en/v1/base/math/#Base.isapprox"><code>isapprox</code></a> by adding them as optional parameters to the function call. For example, we can set the absolute tolerance of the comparison with <code>atol=</code>.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; @compare(v1, v2, atol=1e-5)</code><code class="nohighlight hljs ansi" style="display:block;">_.b: missing in v1
_.z.a: different
_.z: different
_: different
false</code></pre><p>Keep in mind that when comparing two <code>NaN</code> values the result is <code>false</code>. This can be changed by setting <code>nans=true</code>. </p><p>Other useful parameters include <code>ignoremissing</code>, which can be set to <code>true</code> in order to compare only variables that exist in both inputs, and <code>showequal</code> which can be set to <code>true</code> to report all variables, not only the ones that are different. <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.compare"><code>compare</code></a> and <a href="../../../Reference/TimeSeriesEcon/#TimeSeriesEcon.@compare"><code>@compare</code></a> return <code>true</code> if the two databases compare as equal and <code>false</code> otherwise.</p><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; @compare(v1, v2, showequal, ignoremissing, atol=0.01)</code><code class="nohighlight hljs ansi" style="display:block;">_.y: same
_.z.a: same
_.z.b: same
_.z: same
_.x: same
_: same
true</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../README/">« README</a><a class="docs-footer-nextpage" href="../../2.simple_RBC/main/">Simple RBC Model »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Tuesday 31 January 2023 02:06">Tuesday 31 January 2023</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
